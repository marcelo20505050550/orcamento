(()=>{var e={};e.id=1915,e.ids=[1915],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11233:(e,t,r)=>{Promise.resolve().then(r.bind(r,33505))},11997:e=>{"use strict";e.exports=require("punycode")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33505:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var a=r(60687),s=r(43210),d=r(16189),i=r(85814),o=r.n(i),l=r(62185);function n({params:e}){let t=(0,d.useRouter)(),r="true"===(0,d.useSearchParams)().get("novo");(0,s.use)(e).id;let[i,n]=(0,s.useState)(null),[u,p]=(0,s.useState)(!0),[h,g]=(0,s.useState)(null),[y,b]=(0,s.useState)(!1),f=async e=>{if(i){b(!0);try{let t=await l.Ay.put(`/api/pedidos/${i.id}`,{status:e});if(t.error)throw Error(t.error||"Erro ao atualizar status do pedido");n({...i,status:t.data.status,updated_at:t.data.updated_at})}catch(e){console.error("Erro ao atualizar status:",e),g(e instanceof Error?e.message:"Ocorreu um erro ao atualizar o status do pedido")}finally{b(!1)}}},j=e=>{let t=new Date(e);return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)},w=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e),v=()=>i&&i.processos.length?i.processos.reduce((e,t)=>e+t.processo.preco_por_unidade*t.quantidade,0):0,N=()=>i&&i.mao_de_obra.length?i.mao_de_obra.reduce((e,t)=>e+t.mao_de_obra.preco_por_hora*t.horas,0):0,k=()=>i&&i.itens_extras&&i.itens_extras.length?i.itens_extras.reduce((e,t)=>e+t.valor,0):0,_=e=>{let t=Math.floor(e/60),r=e%60;return 0===t?`${r} minutos`:0===r?`${t} ${1===t?"hora":"horas"}`:`${t} ${1===t?"hora":"horas"} e ${r} minutos`},C=()=>{let e=i?i.produto.preco_unitario*i.quantidade:0,t=v(),r=N();return e+t+r+k()+(i?.tem_frete&&i.valor_frete||0)},E=()=>{if(!i)return 0;let e=C(),t=i.margem_lucro_percentual;return t>0?e/((100-t)/100)-e:0},P=()=>{if(!i)return 0;let e=C(),t=i.margem_lucro_percentual;return t>0?e/((100-t)/100):e},S=()=>{if(!i)return 0;let e=P(),t=i.impostos_percentual;return t>0?e/((100-t)/100)-e:0},[A,z]=(0,s.useState)(!1),[q,$]=(0,s.useState)(!1),[M,F]=(0,s.useState)(!1),[T,O]=(0,s.useState)(!1),I=async(e,t)=>{if(i){O(!0);try{let r=await l.Ay.put(`/api/pedidos/${i.id}`,{tem_frete:e,valor_frete:t});if(r.error)throw Error(r.error||"Erro ao atualizar frete");n({...i,tem_frete:r.data.tem_frete,valor_frete:r.data.valor_frete,updated_at:r.data.updated_at}),z(!1)}catch(e){console.error("Erro ao atualizar frete:",e),g(e instanceof Error?e.message:"Erro ao atualizar frete")}finally{O(!1)}}},D=async e=>{if(i){O(!0);try{let t=await l.Ay.put(`/api/pedidos/${i.id}`,{margem_lucro_percentual:e});if(t.error)throw Error(t.error||"Erro ao atualizar margem de lucro");n({...i,margem_lucro_percentual:t.data.margem_lucro_percentual,updated_at:t.data.updated_at}),$(!1)}catch(e){console.error("Erro ao atualizar margem:",e),g(e instanceof Error?e.message:"Erro ao atualizar margem de lucro")}finally{O(!1)}}},R=async e=>{if(i){O(!0);try{let t=await l.Ay.put(`/api/pedidos/${i.id}`,{impostos_percentual:e});if(t.error)throw Error(t.error||"Erro ao atualizar impostos");n({...i,impostos_percentual:t.data.impostos_percentual,updated_at:t.data.updated_at}),F(!1)}catch(e){console.error("Erro ao atualizar impostos:",e),g(e instanceof Error?e.message:"Erro ao atualizar impostos")}finally{O(!1)}}};if(u)return(0,a.jsx)("div",{className:"p-4 flex justify-center items-center h-full",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})});if(h)return(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/30 p-4 rounded-md",children:[(0,a.jsx)("h2",{className:"text-red-800 dark:text-red-200 font-medium",children:"Erro"}),(0,a.jsx)("p",{className:"text-red-700 dark:text-red-300 mt-1",children:h}),(0,a.jsx)("button",{onClick:()=>t.push("/pedidos"),className:"mt-3 text-sm text-white bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded",children:"Voltar aos Pedidos"})]})});if(!i)return(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/30 p-4 rounded-md",children:[(0,a.jsx)("h2",{className:"text-yellow-800 dark:text-yellow-200 font-medium",children:"Pedido n\xe3o encontrado"}),(0,a.jsx)("p",{className:"text-yellow-700 dark:text-yellow-300 mt-1",children:"O pedido solicitado n\xe3o foi encontrado ou voc\xea n\xe3o tem permiss\xe3o para acess\xe1-lo."}),(0,a.jsx)("button",{onClick:()=>t.push("/pedidos"),className:"mt-3 text-sm text-white bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded",children:"Voltar aos Pedidos"})]})});let G=(e=>{switch(e){case"pendente":return{text:"Pendente",className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-200"};case"em_producao":return{text:"Em Produ\xe7\xe3o",className:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-200"};case"finalizado":return{text:"Finalizado",className:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-200"};case"cancelado":return{text:"Cancelado",className:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-200"};default:return{text:e,className:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}}})(i.status),L=v(),H=N(),B=k();return i&&i.processos.length&&i.processos.reduce((e,t)=>e+t.processo.tempo_estimado_minutos*t.quantidade,0),(0,a.jsxs)("div",{className:"space-y-6",suppressHydrationWarning:!0,children:[r&&(0,a.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/30 p-4 rounded-lg shadow",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-blue-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{className:"ml-3 flex-1 md:flex md:justify-between",children:[(0,a.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"Pedido criado com sucesso! Para completar o or\xe7amento, adicione processos de fabrica\xe7\xe3o e m\xe3o de obra."}),(0,a.jsxs)("div",{className:"mt-3 flex flex-wrap gap-3 md:mt-0 md:ml-6",children:[(0,a.jsxs)(o(),{href:`/pedidos/${i?.id}/processos`,className:"text-sm font-medium text-blue-700 dark:text-blue-300 hover:text-blue-600 dark:hover:text-blue-200 whitespace-nowrap",children:["Adicionar Processos ",(0,a.jsx)("span",{"aria-hidden":"true",children:"→"})]}),(0,a.jsxs)(o(),{href:`/pedidos/${i?.id}/mao-de-obra`,className:"text-sm font-medium text-blue-700 dark:text-blue-300 hover:text-blue-600 dark:hover:text-blue-200 whitespace-nowrap",children:["Adicionar M\xe3o de Obra ",(0,a.jsx)("span",{"aria-hidden":"true",children:"→"})]}),(0,a.jsxs)(o(),{href:`/pedidos/${i?.id}/itens-extras`,className:"text-sm font-medium text-blue-700 dark:text-blue-300 hover:text-blue-600 dark:hover:text-blue-200 whitespace-nowrap",children:["Adicionar Itens Extras ",(0,a.jsx)("span",{"aria-hidden":"true",children:"→"})]})]})]})]})}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold tracking-tight text-gray-900 dark:text-white",children:"Detalhes do Pedido"}),(0,a.jsxs)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:["Pedido #",i.id.substring(0,8)," - ",j(i.created_at)]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)(o(),{href:"/pedidos",className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-700 shadow-sm text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Voltar"}),(0,a.jsxs)(o(),{href:`/orcamentos?pedido_id=${i.id}`,className:"inline-flex items-center px-3 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Gerar Or\xe7amento"]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Informa\xe7\xf5es do Pedido"})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2 lg:grid-cols-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Produto"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:i.produto.nome})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Quantidade"}),(0,a.jsxs)("dd",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:[i.quantidade," unidades"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),(0,a.jsx)("dd",{className:"mt-1",children:(0,a.jsx)("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${G.className}`,children:G.text})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Pre\xe7o Unit\xe1rio"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:w(i.produto.preco_unitario)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Data de Cria\xe7\xe3o"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:j(i.created_at)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"\xdaltima Atualiza\xe7\xe3o"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900 dark:text-white",children:j(i.updated_at)})]}),(0,a.jsxs)("div",{className:"sm:col-span-2 lg:col-span-3",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Observa\xe7\xf5es"}),(0,a.jsx)("dd",{className:"mt-1 text-sm text-gray-900 dark:text-white whitespace-pre-wrap",children:i.observacoes||"Nenhuma observa\xe7\xe3o"})]})]})})]}),"finalizado"!==i.status&&"cancelado"!==i.status&&(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Atualizar Status"})}),(0,a.jsxs)("div",{className:"p-6 flex flex-wrap gap-2",children:["pendente"===i.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>f("em_producao"),disabled:y,className:"inline-flex items-center px-3 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Atualizando...":"Iniciar Produ\xe7\xe3o"}),(0,a.jsx)("button",{onClick:()=>f("cancelado"),disabled:y,className:"inline-flex items-center px-3 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Atualizando...":"Cancelar Pedido"})]}),"em_producao"===i.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>f("finalizado"),disabled:y,className:"inline-flex items-center px-3 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Atualizando...":"Finalizar Produ\xe7\xe3o"}),(0,a.jsx)("button",{onClick:()=>f("cancelado"),disabled:y,className:"inline-flex items-center px-3 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Atualizando...":"Cancelar Pedido"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Processos de Fabrica\xe7\xe3o"}),(0,a.jsx)(o(),{href:`/pedidos/${i.id}/processos`,className:"inline-flex items-center px-3 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:i.processos&&i.processos.length>0?"Gerenciar Processos":"Adicionar Processos"})]}),i.processos&&i.processos.length>0?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,a.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Processo"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Quantidade"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Pre\xe7o por Hora"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Tempo Estimado (horas)"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Subtotal"})]})}),(0,a.jsxs)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:[i.processos.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.processo.nome}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:e.quantidade}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:w(e.processo.preco_por_unidade)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:_(e.processo.tempo_estimado_minutos)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:w(e.processo.preco_por_unidade*e.quantidade)})]},e.id)),(0,a.jsxs)("tr",{className:"bg-gray-50 dark:bg-gray-700",children:[(0,a.jsx)("td",{colSpan:4,className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white text-right",children:"Total:"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:w(L)})]})]})]})}):(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/30 p-4 rounded-md flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Nenhum processo adicionado"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-yellow-700 dark:text-yellow-300",children:"Este pedido n\xe3o possui processos de fabrica\xe7\xe3o associados. Adicione processos para calcular custos de produ\xe7\xe3o."})]}),(0,a.jsx)(o(),{href:`/pedidos/${i.id}/processos`,className:"flex-shrink-0 inline-flex items-center px-3 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Adicionar Agora"})]})})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"M\xe3o de Obra"}),(0,a.jsx)(o(),{href:`/pedidos/${i.id}/mao-de-obra`,className:"inline-flex items-center px-3 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:i.mao_de_obra&&i.mao_de_obra.length>0?"Gerenciar M\xe3o de Obra":"Adicionar M\xe3o de Obra"})]}),i.mao_de_obra&&i.mao_de_obra.length>0?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,a.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Tipo"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Horas"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Pre\xe7o por Hora"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Subtotal"})]})}),(0,a.jsxs)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:[i.mao_de_obra.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.mao_de_obra.tipo}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:e.horas.toLocaleString("pt-BR",{minimumFractionDigits:1,maximumFractionDigits:1})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:w(e.mao_de_obra.preco_por_hora)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:w(e.mao_de_obra.preco_por_hora*e.horas)})]},e.id)),(0,a.jsxs)("tr",{className:"bg-gray-50 dark:bg-gray-700",children:[(0,a.jsx)("td",{colSpan:3,className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white text-right",children:"Total:"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:w(H)})]})]})]})}):(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/30 p-4 rounded-md flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Nenhuma m\xe3o de obra adicionada"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-yellow-700 dark:text-yellow-300",children:"Este pedido n\xe3o possui m\xe3o de obra associada. Adicione m\xe3o de obra para calcular custos de produ\xe7\xe3o."})]}),(0,a.jsx)(o(),{href:`/pedidos/${i.id}/mao-de-obra`,className:"flex-shrink-0 inline-flex items-center px-3 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Adicionar Agora"})]})})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Itens Extras"}),(0,a.jsx)(o(),{href:`/pedidos/${i.id}/itens-extras`,className:"inline-flex items-center px-3 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:i.itens_extras&&i.itens_extras.length>0?"Gerenciar Itens Extras":"Adicionar Itens Extras"})]}),i.itens_extras&&i.itens_extras.length>0?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,a.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Nome"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Descri\xe7\xe3o"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Valor"}),(0,a.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Data de Cria\xe7\xe3o"})]})}),(0,a.jsxs)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:[i.itens_extras.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.nome}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-300",children:e.descricao||"-"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:w(e.valor)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:j(e.created_at)})]},e.id)),(0,a.jsxs)("tr",{className:"bg-gray-50 dark:bg-gray-700",children:[(0,a.jsx)("td",{colSpan:3,className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white text-right",children:"Total:"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:w(B)})]})]})]})}):(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/30 p-4 rounded-md flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Nenhum item extra adicionado"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-yellow-700 dark:text-yellow-300",children:"Este pedido n\xe3o possui itens extras. Adicione itens como taxas de urg\xeancia, materiais especiais ou servi\xe7os adicionais."})]}),(0,a.jsx)(o(),{href:`/pedidos/${i.id}/itens-extras`,className:"flex-shrink-0 inline-flex items-center px-3 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Adicionar Agora"})]})})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Configura\xe7\xf5es de Or\xe7amento"})}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Frete"}),(0,a.jsx)("button",{onClick:()=>z(!A),className:"text-sm text-blue-600 hover:text-blue-500",disabled:T,children:A?"Cancelar":"Editar"})]}),A?(0,a.jsx)(c,{temFrete:i.tem_frete,valorFrete:i.valor_frete,onSave:I,onCancel:()=>z(!1),loading:T}):(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:i.tem_frete?(0,a.jsxs)(a.Fragment,{children:["Tem frete: ",(0,a.jsx)("span",{className:"font-medium",children:w(i.valor_frete)})]}):"Sem frete"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Margem de Lucro"}),(0,a.jsx)("button",{onClick:()=>$(!q),className:"text-sm text-blue-600 hover:text-blue-500",disabled:T,children:q?"Cancelar":"Editar"})]}),q?(0,a.jsx)(x,{margemPercentual:i.margem_lucro_percentual,onSave:D,onCancel:()=>$(!1),loading:T}):(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[i.margem_lucro_percentual,"% (",w(E()),")"]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Impostos"}),(0,a.jsx)("button",{onClick:()=>F(!M),className:"text-sm text-blue-600 hover:text-blue-500",disabled:T,children:M?"Cancelar":"Editar"})]}),M?(0,a.jsx)(m,{impostosPercentual:i.impostos_percentual,onSave:R,onCancel:()=>F(!1),loading:T}):(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[i.impostos_percentual,"% (",w(S()),")"]})})]})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Resumo de Custos"})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Custo dos Materiais"}),(0,a.jsx)("dd",{className:"mt-1 text-lg font-semibold text-gray-900 dark:text-white",children:w(i.produto.preco_unitario*i.quantidade)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Custo dos Processos"}),(0,a.jsx)("dd",{className:"mt-1 text-lg font-semibold text-gray-900 dark:text-white",children:w(L)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Custo da M\xe3o de Obra"}),(0,a.jsx)("dd",{className:"mt-1 text-lg font-semibold text-gray-900 dark:text-white",children:w(H)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Custo dos Itens Extras"}),(0,a.jsx)("dd",{className:"mt-1 text-lg font-semibold text-gray-900 dark:text-white",children:w(B)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Frete"}),(0,a.jsx)("dd",{className:"mt-1 text-lg font-semibold text-gray-900 dark:text-white",children:w(i.tem_frete?i.valor_frete:0)})]}),(0,a.jsxs)("div",{className:"sm:col-span-2 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Subtotal"}),(0,a.jsx)("dd",{className:"mt-1 text-lg font-semibold text-gray-900 dark:text-white",children:w(C())})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:["Margem de Lucro (",i.margem_lucro_percentual,"%)"]}),(0,a.jsx)("dd",{className:"mt-1 text-lg font-semibold text-gray-900 dark:text-white",children:w(E())})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total com Margem"}),(0,a.jsx)("dd",{className:"mt-1 text-lg font-semibold text-gray-900 dark:text-white",children:w(P())})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:["Impostos (",i.impostos_percentual,"%)"]}),(0,a.jsx)("dd",{className:"mt-1 text-lg font-semibold text-gray-900 dark:text-white",children:w(S())})]}),(0,a.jsxs)("div",{className:"sm:col-span-2 pt-4 border-t-2 border-gray-300 dark:border-gray-600",children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Total Final"}),(0,a.jsx)("dd",{className:"mt-1 text-3xl font-bold text-gray-900 dark:text-white",children:w((()=>{if(!i)return 0;let e=P(),t=i.impostos_percentual;return t>0?e/((100-t)/100):e})())})]})]})})]})]})}function c({temFrete:e,valorFrete:t,onSave:r,onCancel:d,loading:i}){let[o,l]=(0,s.useState)(e),[n,c]=(0,s.useState)(t.toString());return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r(o,parseFloat(n)||0)},className:"mt-3 space-y-3",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:o,onChange:e=>l(e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Tem frete"})]})}),o&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Valor do Frete"}),(0,a.jsx)("input",{type:"number",step:"0.01",min:"0",value:n,onChange:e=>c(e.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"0,00"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{type:"submit",disabled:i,className:"px-3 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 disabled:opacity-50",children:i?"Salvando...":"Salvar"}),(0,a.jsx)("button",{type:"button",onClick:d,className:"px-3 py-2 bg-gray-300 text-gray-700 text-sm rounded-md hover:bg-gray-400",children:"Cancelar"})]})]})}function x({margemPercentual:e,onSave:t,onCancel:r,loading:d}){let[i,o]=(0,s.useState)(e.toString());return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(parseFloat(i)||0)},className:"mt-3 space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Margem de Lucro (%)"}),(0,a.jsx)("input",{type:"number",step:"0.01",min:"0",max:"100",value:i,onChange:e=>o(e.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"0,00"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{type:"submit",disabled:d,className:"px-3 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 disabled:opacity-50",children:d?"Salvando...":"Salvar"}),(0,a.jsx)("button",{type:"button",onClick:r,className:"px-3 py-2 bg-gray-300 text-gray-700 text-sm rounded-md hover:bg-gray-400",children:"Cancelar"})]})]})}function m({impostosPercentual:e,onSave:t,onCancel:r,loading:d}){let[i,o]=(0,s.useState)(e.toString());return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(parseFloat(i)||0)},className:"mt-3 space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Impostos (%)"}),(0,a.jsx)("input",{type:"number",step:"0.01",min:"0",max:"100",value:i,onChange:e=>o(e.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"0,00"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{type:"submit",disabled:d,className:"px-3 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 disabled:opacity-50",children:d?"Salvando...":"Salvar"}),(0,a.jsx)("button",{type:"button",onClick:r,className:"px-3 py-2 bg-gray-300 text-gray-700 text-sm rounded-md hover:bg-gray-400",children:"Cancelar"})]})]})}},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},39380:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>n});var a=r(65239),s=r(48088),d=r(88170),i=r.n(d),o=r(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let n={children:["",{children:["pedidos",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,41439)),"C:\\Aplicativos\\saas\\src\\app\\pedidos\\[id]\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"C:\\Aplicativos\\saas\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Aplicativos\\saas\\src\\app\\pedidos\\[id]\\page.tsx"],x={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/pedidos/[id]/page",pathname:"/pedidos/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},41439:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Aplicativos\\\\saas\\\\src\\\\app\\\\pedidos\\\\[id]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Aplicativos\\saas\\src\\app\\pedidos\\[id]\\page.tsx","default")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},62185:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>d,Zq:()=>s});var a=r(79481);async function s(e,t={}){let r=e.startsWith("/api/")?e:`/api${e.startsWith("/")?e:`/${e}`}`,d=new Headers(t.headers);if(d.set("Content-Type","application/json"),!1!==t.requireAuth)try{let{data:{session:e}}=await a.Ay.auth.getSession(),r=e?.access_token;if(r)d.set("Authorization",`Bearer ${r}`);else if(t.requireAuth)throw Error("Autentica\xe7\xe3o necess\xe1ria para acessar este recurso")}catch(e){if(t.requireAuth)throw Error("Falha na autentica\xe7\xe3o")}let i=r;if(t.params){let e=new URLSearchParams;Object.entries(t.params).forEach(([t,r])=>{null!=r&&e.append(t,r)});let r=e.toString();r&&(i+=`?${r}`)}try{let e=await fetch(i,{...t,headers:d});if(!e.ok){let t=await e.json().catch(()=>null),r=t?.error||t?.message||"Erro desconhecido";throw Error(`Erro ${e.status}: ${r}`)}let r=e.headers.get("content-type");if(r&&r.includes("application/json"))return await e.json();return await e.text()}catch(e){throw console.error(`Erro ao chamar API ${r}:`,e),e}}let d={get:(e,t={})=>s(e,{...t,method:"GET"}),post:(e,t,r={})=>s(e,{...r,method:"POST",body:JSON.stringify(t)}),put:(e,t,r={})=>s(e,{...r,method:"PUT",body:JSON.stringify(t)}),patch:(e,t,r={})=>s(e,{...r,method:"PATCH",body:JSON.stringify(t)}),delete:(e,t={})=>s(e,{...t,method:"DELETE"})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var a=r(31658);let s=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},98081:(e,t,r)=>{Promise.resolve().then(r.bind(r,41439))}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[4447,4400,1658,2847],()=>r(39380));module.exports=a})();